{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/nickl/Desktop/Git Projects/kniffel/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/nickl/Desktop/Git Projects/kniffel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/nickl/Desktop/Git Projects/kniffel/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'../App.css';import'./css/EndScreen.css';import React,{useEffect,useState}from'react';import{useLocation,useNavigate}from'react-router-dom';import useAxiosPrivate from'../hooks/useAxiosPrivate';import Loader from'../components/Loader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function EndScreen(){var navigate=useNavigate();var axiosPrivate=useAxiosPrivate();var _useState=useState(),_useState2=_slicedToArray(_useState,2),session=_useState2[0],setSession=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),header=_useState4[0],setHeader=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loaderVisible=_useState6[0],setLoaderVisible=_useState6[1];var location=useLocation();var urlParams=new URLSearchParams(location.search);var winner=JSON.parse(urlParams.get('winner'));var sessionId=+urlParams.get('sessionid');useEffect(function(){setLoaderVisible(true);function connect(){return _connect.apply(this,arguments);}function _connect(){_connect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axiosPrivate.get('/endscreen',{headers:{'Content-Type':'application/json'},params:{id:sessionId},withCredentials:true}).then(function(res){setSession(res===null||res===void 0?void 0:res.data);if(!winner||!(res!==null&&res!==void 0&&res.data))return navigate('/creategame',{replace:true});if(winner.length===1){setHeader(\"'\".concat(winner[0],\"' hat gewonnen!\"));}else{var string=\"'\".concat(winner[0],\"' \");for(var i=1;winner.length>i;i++){var p=\"'\".concat(winner[i],\"'\");if(i+1===winner.length){string+=\" und \".concat(p,\" haben gewonnen!\");}else{string+=\", \".concat(p);}}setHeader(string);}setLoaderVisible(false);}).catch(function(){navigate('/creategame',{replace:true});});case 2:case\"end\":return _context.stop();}},_callee);}));return _connect.apply(this,arguments);}connect();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"button-container\",children:/*#__PURE__*/_jsx(\"label\",{className:\"winner\",children:header})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"table\",{className:\"table wins\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Spieler\"}),session===null||session===void 0?void 0:session.List_Players.map(function(p,i){return/*#__PURE__*/_jsx(\"td\",{children:p.Name},i);})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Gewonnen\"}),session===null||session===void 0?void 0:session.List_Players.map(function(p,i){return/*#__PURE__*/_jsx(\"td\",{children:p.Wins},i);})]})]})}),/*#__PURE__*/_jsx(Loader,{loaderVisible:loaderVisible}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",style:{width:'100%'},onClick:function onClick(){return navigate('/creategame',{replace:false});},children:\"Ok\"})]});}export default EndScreen;","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","useAxiosPrivate","Loader","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EndScreen","navigate","axiosPrivate","_useState","_useState2","_slicedToArray","session","setSession","_useState3","_useState4","header","setHeader","_useState5","_useState6","loaderVisible","setLoaderVisible","location","urlParams","URLSearchParams","search","winner","JSON","parse","get","sessionId","connect","_connect","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","headers","params","id","withCredentials","then","res","data","replace","length","concat","string","i","p","catch","stop","children","className","List_Players","map","Name","Wins","style","width","onClick"],"sources":["C:/Users/nickl/Desktop/Git Projects/kniffel/src/pages/EndScreen.js"],"sourcesContent":["\r\n\r\nimport '../App.css'\r\nimport './css/EndScreen.css'\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useLocation, useNavigate } from 'react-router-dom'\r\nimport useAxiosPrivate from '../hooks/useAxiosPrivate'\r\n\r\nimport Loader from '../components/Loader'\r\n\r\n\r\n\r\n\r\n\r\nfunction EndScreen() {\r\n\r\n\tconst navigate = useNavigate()\r\n\tconst axiosPrivate = useAxiosPrivate()\r\n\r\n\tconst [session, setSession] = useState()\r\n\tconst [header, setHeader] = useState('')\r\n\tconst [loaderVisible, setLoaderVisible] = useState(false)\r\n\r\n\tconst location = useLocation()\r\n\tconst urlParams = new URLSearchParams(location.search)\r\n\tconst winner = JSON.parse(urlParams.get('winner'))\r\n\tconst sessionId = +urlParams.get('sessionid')\r\n\r\n\r\n\r\n\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tsetLoaderVisible(true)\r\n\r\n\t\tasync function connect() {\r\n\t\t\tawait axiosPrivate.get('/endscreen',\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\t\tparams: { id: sessionId },\r\n\t\t\t\t\twithCredentials: true\r\n\t\t\t\t}\r\n\t\t\t).then((res) => {\r\n\r\n\t\t\t\tsetSession(res?.data)\r\n\t\t\t\tif(!winner || !res?.data) return navigate('/creategame', { replace: true })\r\n\r\n\t\t\t\tif(winner.length === 1) {\r\n\t\t\t\t\tsetHeader(`'${winner[0]}' hat gewonnen!`)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet string = `'${winner[0]}' `\r\n\t\t\t\t\tfor(let i = 1; winner.length > i; i++) {\r\n\t\t\t\t\t\tconst p = `'${winner[i]}'`\r\n\t\t\t\t\t\tif((i + 1) === winner.length) {\r\n\t\t\t\t\t\t\tstring += ` und ${p} haben gewonnen!`\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstring += `, ${p}`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetHeader(string)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetLoaderVisible(false)\r\n\r\n\t\t\t}).catch(() => {\r\n\t\t\t\tnavigate('/creategame', { replace: true })\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tconnect()\r\n\r\n\t}, [])\r\n\r\n\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\r\n\t\t\t<div className='button-container'>\r\n\t\t\t\t<label className='winner'>\r\n\t\t\t\t\t{header}\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\r\n\t\t\t<br/>\r\n\r\n\t\t\t<table className='table wins'>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td>Spieler</td>\r\n\t\t\t\t\t\t{session?.List_Players.map((p, i) => (\r\n\t\t\t\t\t\t\t<td key={i}>{p.Name}</td>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td>Gewonnen</td>\r\n\t\t\t\t\t\t{session?.List_Players.map((p, i) => (\r\n\t\t\t\t\t\t\t<td key={i}>{p.Wins}</td>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\r\n\t\t\t<Loader loaderVisible={loaderVisible}/>\r\n\r\n\t\t\t<button className='button' style={{ width: '100%' }} onClick={() => navigate('/creategame', { replace: false })}>Ok</button>\r\n\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default EndScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}