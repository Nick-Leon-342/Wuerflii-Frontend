{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/nickl/Desktop/Git Projects/kniffel/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/nickl/Desktop/Git Projects/kniffel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/nickl/Desktop/Git Projects/kniffel/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'../App.css';import React,{useEffect,useState}from'react';import{Link,useNavigate}from'react-router-dom';import{clearSessionStorage,sessionStorage_session,formatDate}from'./utils';import useAxiosPrivate from'../hooks/useAxiosPrivate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function SessionPreview(){var _session$List_Players,_session$List_Players2,_session$List_Players3,_session$List_Players4;var navigate=useNavigate();var axiosPrivate=useAxiosPrivate();var session=JSON.parse(sessionStorage.getItem(sessionStorage_session));var _useState=useState(),_useState2=_slicedToArray(_useState,2),finalScores=_useState2[0],setFinalScores=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loaderVisible=_useState4[0],setLoaderVisible=_useState4[1];useEffect(function(){if(!session||!session.List_Players)return navigate('/creategame',{replace:true});function request(){return _request.apply(this,arguments);}function _request(){_request=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoaderVisible(true);_context.next=3;return axiosPrivate.get('/sessionpreview',{headers:{'Content-Type':'application/json'},params:{id:session.id},withCredentials:true}).then(function(res){setFinalScores(JSON.parse(res.data));}).catch(function(err){var status=err.response.status;if(status===404){window.alert('Die Partie wurde nicht gefunden!');navigate('/selectsession',{replace:true});}else{window.alert('Unknown error:',err);}});case 3:setLoaderVisible(false);case 4:case\"end\":return _context.stop();}},_callee);}));return _request.apply(this,arguments);}request();},[]);var back=function back(){clearSessionStorage();navigate('/selectsession',{replace:true});};var firstColumnWidth='150px';var firstColumnStyle={width:firstColumnWidth,minWidth:firstColumnWidth,maxWidth:firstColumnWidth,padding:'5px',fontWeight:'bold',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis'};var columnWidth=(session===null||session===void 0?void 0:(_session$List_Players=session.List_Players)===null||_session$List_Players===void 0?void 0:_session$List_Players.length)>8?'75px':(session===null||session===void 0?void 0:(_session$List_Players2=session.List_Players)===null||_session$List_Players2===void 0?void 0:_session$List_Players2.length)>4?'125px':'200px';var style={width:columnWidth,minWidth:columnWidth,maxWidth:columnWidth,padding:'5px',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis'};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"table\",{className:\"table\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:firstColumnStyle,children:\"Spieler\"}),session===null||session===void 0?void 0:(_session$List_Players3=session.List_Players)===null||_session$List_Players3===void 0?void 0:_session$List_Players3.map(function(p,i){return/*#__PURE__*/_jsx(\"td\",{style:style,children:p.Name},i);})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:firstColumnStyle,children:\"Gewonnen\"}),session===null||session===void 0?void 0:(_session$List_Players4=session.List_Players)===null||_session$List_Players4===void 0?void 0:_session$List_Players4.map(function(p,i){return/*#__PURE__*/_jsx(\"td\",{style:style,children:p.Wins},i);})]})]})}),/*#__PURE__*/_jsx(\"table\",{className:\"table\",children:/*#__PURE__*/_jsx(\"tbody\",{children:finalScores&&finalScores.map(function(fs,i){var _session$List_Players5;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:firstColumnStyle,children:formatDate(fs.Played)}),session===null||session===void 0?void 0:(_session$List_Players5=session.List_Players)===null||_session$List_Players5===void 0?void 0:_session$List_Players5.map(function(p,j){return/*#__PURE__*/_jsx(\"td\",{style:style,children:fs[p.Alias]},\"\".concat(i,\".\").concat(j));})]},i);})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"loader \".concat(loaderVisible?'':'notVisible'),children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",style:{height:'40px',width:'100%',marginBottom:'0px'},onClick:function onClick(){return navigate('/game',{replace:true});},children:\"Los geht's!\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex'},children:/*#__PURE__*/_jsx(\"p\",{className:\"link-switch\",children:/*#__PURE__*/_jsx(Link,{to:\"/selectsession\",onClick:back,children:\"Zur\\xFCck\"})})})]});}export default SessionPreview;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","clearSessionStorage","sessionStorage_session","formatDate","useAxiosPrivate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SessionPreview","_session$List_Players","_session$List_Players2","_session$List_Players3","_session$List_Players4","navigate","axiosPrivate","session","JSON","parse","sessionStorage","getItem","_useState","_useState2","_slicedToArray","finalScores","setFinalScores","_useState3","_useState4","loaderVisible","setLoaderVisible","List_Players","replace","request","_request","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","get","headers","params","id","withCredentials","then","res","data","catch","err","status","response","window","alert","stop","back","firstColumnWidth","firstColumnStyle","width","minWidth","maxWidth","padding","fontWeight","whiteSpace","overflow","textOverflow","columnWidth","length","style","children","className","map","p","i","Name","Wins","fs","_session$List_Players5","Played","j","Alias","concat","height","marginBottom","onClick","display","to"],"sources":["C:/Users/nickl/Desktop/Git Projects/kniffel/src/pages/SessionPreview.js"],"sourcesContent":["\r\n\r\nimport '../App.css'\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Link, useNavigate } from 'react-router-dom'\r\nimport { clearSessionStorage, sessionStorage_session, formatDate } from './utils'\r\nimport useAxiosPrivate from '../hooks/useAxiosPrivate'\r\n\r\n\r\nfunction SessionPreview() {\r\n\t\r\n\tconst navigate = useNavigate()\r\n\tconst axiosPrivate = useAxiosPrivate()\r\n\tconst session = JSON.parse(sessionStorage.getItem(sessionStorage_session))\r\n\tconst [finalScores, setFinalScores] = useState()\r\n\tconst [loaderVisible, setLoaderVisible] = useState(false)\r\n\r\n\t\r\n\r\n\t\r\n\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tif(!session || !session.List_Players) return navigate('/creategame', { replace: true })\r\n\r\n\t\tasync function request() {\r\n\r\n\t\t\tsetLoaderVisible(true)\r\n\r\n\t\t\tawait axiosPrivate.get('/sessionpreview',\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\t\tparams: { id: session.id },\r\n\t\t\t\t\twithCredentials: true\r\n\t\t\t\t}\r\n\t\t\t).then((res) => {\r\n\t\t\t\tsetFinalScores(JSON.parse(res.data))\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\tconst status = err.response.status\r\n\t\t\t\tif(status === 404) {\r\n\t\t\t\t\twindow.alert('Die Partie wurde nicht gefunden!')\r\n\t\t\t\t\tnavigate('/selectsession', { replace: true })\r\n\t\t\t\t} else {\r\n\t\t\t\t\twindow.alert('Unknown error:', err)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tsetLoaderVisible(false)\r\n\r\n\t\t}\r\n\r\n\t\trequest()\r\n\r\n\t}, [])\r\n\t\r\n\tconst back = () => {\r\n\t\r\n\t\tclearSessionStorage()\r\n\t\tnavigate('/selectsession', { replace: true })\r\n\t\r\n\t}\r\n\r\n\tconst firstColumnWidth = '150px'\r\n\tconst firstColumnStyle = { width: firstColumnWidth, minWidth: firstColumnWidth, maxWidth: firstColumnWidth, padding: '5px', fontWeight: 'bold', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }\r\n\tconst columnWidth = session?.List_Players?.length > 8 ? '75px' : (session?.List_Players?.length > 4 ? '125px' : '200px')\r\n\tconst style = { width: columnWidth, minWidth: columnWidth, maxWidth: columnWidth, padding: '5px', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }\r\n\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<table className='table'>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td style={firstColumnStyle}>Spieler</td>\r\n\t\t\t\t\t\t{session?.List_Players?.map((p, i) => (\r\n\t\t\t\t\t\t\t<td key={i} style={style}>{p.Name}</td>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td style={firstColumnStyle}>Gewonnen</td>\r\n\t\t\t\t\t\t{session?.List_Players?.map((p, i) => (\r\n\t\t\t\t\t\t\t<td key={i} style={style}>{p.Wins}</td>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\r\n\t\t\t<table className='table'>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{finalScores && finalScores.map((fs, i) => (\r\n\t\t\t\t\t\t<tr key={i}>\r\n\t\t\t\t\t\t\t<td style={firstColumnStyle}>{formatDate(fs.Played)}</td>\r\n\t\t\t\t\t\t\t{session?.List_Players?.map((p, j) => (\r\n\t\t\t\t\t\t\t\t<td key={`${i}.${j}`} style={style}>{fs[p.Alias]}</td>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t\t\r\n\t\t\t<div className={`loader ${loaderVisible ? '' : 'notVisible'}`}>\r\n\t\t\t\t<span/>\r\n\t\t\t\t<span/>\r\n\t\t\t\t<span/>\r\n\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t<button className='button' style={{ height: '40px', width: '100%', marginBottom: '0px' }} onClick={() => navigate('/game', { replace: true })}>Los geht's!</button>\r\n\r\n\t\t\t<div style={{ display: 'flex' }}>\r\n\t\t\t\t<p className='link-switch'>\r\n\t\t\t\t\t<Link to='/selectsession' onClick={back}>Zurück</Link>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default SessionPreview\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}